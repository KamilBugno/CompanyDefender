@using CompanyDefender.Converters;
@{
    ViewBag.Title = "Analiza logów urządzeń";
}
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.1/Chart.bundle.js"></script>

<h2>Analiza logów urządzeń</h2>

@using (Html.BeginForm())
{
    @Html.TextBox("startDate", "2017-12-22", new { @class = "date-picker TextBox" })
    @Html.TextBox("endDate", "2018-01-21", new { @class = "date-picker TextBox" })
    <input type="submit" id="submitDate" value="Zastosuj daty" formaction="DeviceLogsAnalysis" formmethod="post" />
}

<div class="charts">
    <h3>Aktualizacja antywirusa</h3>
    <div class="col-lg-7"><canvas id="chart-0"></canvas></div>
    <div class="col-lg-5"><canvas id="chart-1"></canvas></div>
</div>

<script>
    $('.date-picker').datepicker({ dateFormat: 'yy-mm-dd' });

    var dataValues = @JavaScriptConvert.SerializeObjectToJson(ViewBag.LineChartData.Data)
    var labelValues = @JavaScriptConvert.SerializeObjectToJson(ViewBag.LineChartData.Labels)
    new Chart('chart-0', {
        type: 'line',
        data: {
            datasets: [{
                data: dataValues,
                backgroundColor: "#80bfff",
                borderColor: "#005ce6",
                label: 'Aktualizacja antywirusa'
            }],
            labels: labelValues,
        },
        options: {
            plugins: {
                filler: {
                    propagate: true
                }
            }
        }
    });

    new Chart('chart-1', {
        type: 'pie',
        data: {
            datasets: [{
                data: [30, 70],
                backgroundColor: ["#80bfff", "#003d99"],
            }],
            labels: ["Zaktualizowany", "Niezaktualizowany"],
        },
        options: {
            plugins: {
                filler: {
                    propagate: true
                }
            }
        }
    });

    $(document).ready(function () {
        $('h3').addClass('text-title-chart');
        
    });

</script>
